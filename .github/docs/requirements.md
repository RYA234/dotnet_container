# 要件定義書

## 文書情報
- **作成日**: 2025-12-10
- **最終更新**: 2025-12-10
- **バージョン**: 1.0
- **ステータス**: Draft

## 変更履歴
| 日付 | バージョン | 変更者 | 変更内容 |
|------|----------|--------|---------|
| 2025-12-10 | 1.0 | - | 初版作成 |

---

## 1. プロジェクト概要

### 1.1 目的
ASP.NET Core MVCを用いた、以下3つの目的を持つWebアプリケーション開発

1. **エンジニア教育用デモ** - 将来教育担当になったときの負担軽減
2. **基幹システム** - 在庫管理・販売管理・生産管理
3. **WinFormsマイグレーション** - レガシーアプリケーションのWeb化

### 1.2 背景
- 口頭説明より実際に動くコードで理解してもらう
- 繰り返し使える教材として整備
- 新人教育の時間短縮と品質向上

---

## 2. 機能要件

### 2.1 エンジニア教育用（🎓）

#### 優先順位
1. SQLパフォーマンス ✅
2. エラーハンドリング ← 次
3. セキュリティ
4. データ構造とアルゴリズム

#### 機能一覧
| No | 機能名 | 概要 | ステータス |
|----|--------|------|----------|
| E-01 | SQLパフォーマンス | N+1問題のBad/Good比較デモ | ✅ 実装済み |
| E-02 | エラーハンドリング | 例外処理のベストプラクティス | 🚧 未実装 |
| E-03 | セキュリティ | OWASP Top 10脆弱性デモ | 🚧 未実装 |
| E-04 | データ構造 | List/HashSet性能比較 | 🚧 未実装 |

### 2.2 基幹システム（🏢）

#### 優先順位
1. 在庫管理 ← 次
2. 販売管理
3. 生産管理

#### 機能一覧
| No | 機能名 | 概要 | ステータス |
|----|--------|------|----------|
| C-01 | 在庫管理 | 商品マスタ、在庫数量管理 | 🚧 未実装 |
| C-02 | 販売管理 | 売上伝票、請求書発行 | 🚧 未実装 |
| C-03 | 生産管理 | 生産計画、製造指示 | 🚧 未実装 |

### 2.3 WinFormsマイグレーション（🖥️）

#### 機能一覧
| No | 機能名 | 概要 | ステータス |
|----|--------|------|----------|
| M-01 | 電卓 | 四則演算 | ✅ 実装済み |

---

## 3. 非機能要件

### 3.1 性能要件
- レスポンスタイム: 平均 < 1秒
- 同時接続数: 10ユーザー（教育用想定）

### 3.2 可用性要件
- 稼働率: 95%以上（教育用のため緩め）
- メンテナンス時間: 平日深夜

### 3.3 セキュリティ要件
- HTTPS通信必須
- AWS Secrets Managerで秘密情報管理
- SQLインジェクション対策（パラメータ化クエリ）
- XSS対策（HTMLエンコーディング）

### 3.4 運用要件
- デプロイ: GitHub Actions + AWS ECS
- 監視: CloudWatch Logs
- バックアップ: Supabase自動バックアップ

### 3.5 開発環境
- OS: Windows (LocalDB), Linux (本番)
- IDE: Visual Studio Code
- バージョン管理: Git + GitHub

---

## 4. 制約事項

### 4.1 技術制約
- .NET 8.0以上
- ORMを使用しない（教育目的のため素のSQL）
- 教育用はSQLite、基幹システムはPostgreSQL

### 4.2 スケジュール制約
- 個人開発のため明確な納期なし
- 教育デモを優先的に実装

### 4.3 リソース制約
- AWS無料枠の範囲内で運用
- コスト最適化のためFargate Spot利用

---

## 5. 成功基準

### 5.1 教育用デモ
- [ ] SQLパフォーマンスデモが動作
- [ ] エラーハンドリングデモが動作
- [ ] セキュリティデモが動作
- [ ] データ構造デモが動作

### 5.2 基幹システム
- [ ] 在庫管理の基本CRUD操作が可能
- [ ] 販売管理の伝票入力が可能
- [ ] 生産管理の計画立案が可能

### 5.3 運用
- [ ] ECSで安定稼働
- [ ] CloudWatchで監視可能
- [ ] 障害時に復旧可能

---

## 6. 用語集

| 用語 | 説明 |
|------|------|
| N+1問題 | ループ内でクエリを実行し、クエリ回数が爆発する性能問題 |
| ADR | Architecture Decision Record（技術判断記録） |
| ECS | AWS Elastic Container Service |
| Fargate | サーバーレスコンテナ実行環境 |
