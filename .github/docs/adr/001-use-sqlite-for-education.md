# ADR-001: SQLiteを教育用デモに採用

## ステータス
採用済み

## 日付
2025-12-10

## コンテキスト
エンジニア教育用デモ（N+1問題、エラーハンドリング等）でデータベースが必要。
新人や教育を受ける人が、環境構築に時間をかけずにすぐにデモを動かせる必要がある。

### 要件
- セットアップが簡単
- ローカル環境で動作
- 軽量で高速
- 教育目的に十分な機能

### 制約条件
- 基幹システムとは別のDBを使いたい
- 本番環境ではPostgreSQLを使用予定

## 決定
教育用デモには **SQLite** を採用する。

## 理由

### メリット
1. **セットアップ不要**: ファイルベースのため、インストール不要
2. **軽量**: 単一ファイルで管理、サイズが小さい
3. **高速**: 小規模データには十分な性能
4. **標準SQL**: 基本的なSQL文法を学習できる
5. **ポータブル**: ファイルをコピーするだけで環境移行可能

### デメリット
1. **同時書き込み制限**: 複数ユーザーの同時書き込みには不向き
   - **影響**: 教育用は読み取り専用のデモなので問題なし
2. **機能制限**: ストアドプロシージャなどの高度な機能がない
   - **影響**: 基本的なSQL学習には十分
3. **本番利用不可**: スケーラビリティに限界
   - **影響**: 教育用と基幹システムでDBを分けているため問題なし

### 代替案との比較

| DB | セットアップ | 性能 | 機能 | 採用理由 |
|----|----------|------|------|---------|
| SQLite | ⭐⭐⭐ | ⭐⭐ | ⭐ | ✅ セットアップが簡単 |
| PostgreSQL | ⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ❌ 環境構築が必要 |
| MySQL | ⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ❌ 環境構築が必要 |
| SQL Server LocalDB | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ❌ Windows専用 |

## 結果

### ポジティブな影響
- 新人がすぐにデモを動かせる
- ローカル環境でのテストが容易
- CI/CDパイプラインでの自動テストが簡単
- ファイルサイズが小さいためGitでバージョン管理可能（初期データのみ）

### ネガティブな影響
- SQLiteの特殊な機能（例: Auto Increment構文）を学ぶことになる
- 本番環境（PostgreSQL）との差異がある

### トレードオフ
教育効果を最大化するため、環境構築の簡単さを優先。
本番環境との差異は、基幹システムでPostgreSQLを使うことでカバー。

### 技術スタック
```
教育用デモ: SQLite
基幹システム: PostgreSQL (Supabase)
```

## 関連 ADR
- ADR-002: ORMを使わず素のSQLを採用
