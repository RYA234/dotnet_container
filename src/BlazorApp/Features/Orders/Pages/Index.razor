@page "/orders"
@using Microsoft.AspNetCore.Components.Web
@inject BlazorApp.Services.IOrderService OrderService

<PageTitle>Orders</PageTitle>

<h3>Orders</h3>

<p>簡易価格計算デモです。数量と単価を入力してください。</p>

<div>
    <label>数量: <input @bind="quantity" type="number" /></label>
    <label>単価: <input @bind="priceString" /></label>
    <button @onclick="Calc">計算</button>
</div>

<p>合計: <strong>@totalAmount</strong></p>
<p>割引後: <strong>@finalPrice</strong></p>

@code {
    private int quantity = 1;
    private string priceString = "1000";
    private decimal totalAmount;
    private decimal finalPrice;

    private void Calc()
    {
        if (!decimal.TryParse(priceString, out var price))
        {
            return;
        }
        var order = new BlazorApp.Services.Order
        {
            Id = 1,
            ProductName = "Demo",
            Quantity = quantity,
            Price = price
        };
        totalAmount = order.TotalAmount;
        finalPrice = OrderService.CalculateFinalPrice(order);
    }
}
